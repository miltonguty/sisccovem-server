generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["views"]
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model clients {
  cliId        Int       @default(autoincrement())
  cliCreatedAt DateTime  @default(now(), map: "DF__clients__cliCrea__4CA06362") @db.DateTime
  cliUpdatedAt DateTime? @db.DateTime
  cliDeleted   Int       @default(0, map: "DF__clients__cliDele__4BAC3F29") @db.TinyInt
  cliFirstName String    @db.NVarChar(191)
  cliLastName  String    @db.NVarChar(191)
  cliEmail     String    @db.NVarChar(191)
  cliPhone     String    @db.NVarChar(191)
  cliComId     Int
  cliKey       String    @id(map: "PK__clients__7F6E8DA931E2B7FF") @default(dbgenerated("newid()"), map: "DF__clients__cliKey__282DF8C2") @db.UniqueIdentifier
  companys     companys  @relation(fields: [cliComId], references: [comId], onUpdate: NoAction, map: "FK_clients_companys")
}

model companys {
  comId        Int         @id(map: "PK__companys__9052B556CFF15B7E") @default(autoincrement())
  comCreatedAt DateTime    @default(now(), map: "DF__companys__comCre__4D94879B") @db.DateTime
  comUpdatedAt DateTime?   @db.DateTime
  comDeleted   Int         @default(0, map: "DF__companys__comDel__4F7CD00D") @db.TinyInt
  comName      String      @db.NVarChar(191)
  comPhone     String?     @db.NVarChar(191)
  comAddress   String?     @db.NVarChar(191)
  comKey       String      @default(dbgenerated("newid()"), map: "DF__companys__comKey__29221CFB") @db.UniqueIdentifier
  clients      clients[]
  employees    employees[]
  products     products[]
  providers    providers[]
  users        users[]
}

model employees {
  empId        Int       @id(map: "PK__employee__AFB3EC0D45B02134") @default(autoincrement())
  empCreatedAt DateTime  @default(now(), map: "DF__employees__empCr__52593CB8") @db.DateTime
  empUpdatedAt DateTime? @db.DateTime
  empDeleted   Int       @default(0, map: "DF__employees__empDe__5441852A") @db.TinyInt
  empFirstName String    @db.NVarChar(191)
  empLastName  String    @db.NVarChar(191)
  empEmail     String    @db.NVarChar(191)
  empPhone     String    @db.NVarChar(191)
  empSalary    Float     @default(0, map: "DF__employees__empSa__5535A963")
  empComId     Int
  empKey       String    @default(dbgenerated("newid()"), map: "DF__employees__empKe__2A164134") @db.UniqueIdentifier
  companys     companys  @relation(fields: [empComId], references: [comId], onUpdate: NoAction, map: "FK_employees_companys")
}

model products {
  proId            Int                @id(map: "PK__products__5BBBEEF596910226") @default(autoincrement())
  procreatedAt     DateTime           @default(now(), map: "DF__products__procre__5629CD9C") @db.DateTime
  proUpdatedAt     DateTime?          @db.DateTime
  proDeleted       Int                @default(0, map: "DF__products__proDel__5812160E") @db.TinyInt
  proDescription   String             @db.NVarChar(191)
  proPriceSales    Float              @default(0, map: "DF__products__proPri__59063A47")
  proPricePurchase Float              @default(0, map: "DF__products__proPri__59FA5E80")
  proImage         String?            @db.NVarChar(191)
  proComId         Int
  proStock         Float              @default(0, map: "DF__products__proSto__5BE2A6F2")
  proKey           String             @default(dbgenerated("newid()"), map: "DF__products__proKey__2B0A656D") @db.UniqueIdentifier
  companys         companys           @relation(fields: [proComId], references: [comId], onUpdate: NoAction, map: "FK_products_companys")
  purchasesdetails purchasesdetails[]
  salesdetails     salesdetails[]
}

model productxsupliers {
  pxsId    Int    @id(map: "PK_productsupliers") @default(autoincrement())
  pxsProId Int?
  pxsSupId Int?
  pxsKey   String @default(dbgenerated("newid()"), map: "DF__productxs__pxsKe__2BFE89A6") @db.UniqueIdentifier
}

model providers {
  prvId        Int         @id(map: "PK__supplier__B4F221B29C214A40") @default(autoincrement())
  prvCreatedAt DateTime    @default(now(), map: "DF__suppliers__supCr__778AC167") @db.DateTime
  prvUpdatedAt DateTime?   @db.DateTime
  prvDeleted   Int         @default(0, map: "DF__suppliers__supDe__797309D9") @db.TinyInt
  prvName      String      @db.NVarChar(191)
  prvPhone     String?     @db.NVarChar(191)
  prvAddress   String?     @db.NVarChar(191)
  prvImage     String?     @db.NVarChar(191)
  prvComId     Int
  prvKey       String      @default(dbgenerated("newid()"), map: "DF__suppliers__supKe__30C33EC3") @db.UniqueIdentifier
  companys     companys    @relation(fields: [prvComId], references: [comId], onUpdate: NoAction, map: "FK_suppliers_companys")
  purchases    purchases[]
}

model purchases {
  purId            Int                @id(map: "PK__purchase__671820BA99461370") @default(autoincrement())
  purCreatedAt     DateTime           @default(now(), map: "DF__purchases__purCr__5070F446") @db.DateTime
  purUpdatedAt     DateTime?          @db.DateTime
  purDeleted       Int?               @default(0, map: "DF__purchases__purDe__52593CB8") @db.TinyInt
  purDate          DateTime           @default(now(), map: "DF__purchases__purDa__534D60F1") @db.DateTime
  purTotal         Float              @default(0, map: "DF__purchases__purTo__5441852A")
  purComId         Int
  purClose         Int                @default(0, map: "DF__purchases__purCl__5535A963") @db.TinyInt
  purUseId         Int?
  purPrvId         Int?
  purKey           String             @default(dbgenerated("newid()"), map: "DF__purchases__purKe__2CF2ADDF") @db.UniqueIdentifier
  providers        providers?         @relation(fields: [purPrvId], references: [prvId], onDelete: NoAction, onUpdate: NoAction, map: "FK_purchases_suppliers")
  purchasesdetails purchasesdetails[]
}

model purchasesdetails {
  pudId              Int       @id(map: "PK__purchase__6CD85159678BF7F3") @default(autoincrement())
  pudCreatedAt       DateTime  @default(now(), map: "DF__purchases__pudCr__59063A47") @db.DateTime
  pudUpdatedAt       DateTime? @db.DateTime
  pudDeleted         Int       @default(0, map: "DF__purchases__pudDe__5AEE82B9") @db.TinyInt
  pudCounter         Int
  pudProdId          Int
  pudProdDescription String    @db.NVarChar(191)
  pudProdCount       Float     @default(0, map: "DF__purchases__pudPr__5BE2A6F2")
  pudUseId           Int
  pudPurId           Int
  pudProdPrice       Float     @default(0, map: "DF__purchases__pudPr__5DCAEF64")
  pudLastItem        Int       @default(0, map: "DF__purchases__pudLa__5EBF139D") @db.TinyInt
  pudSubTotal        Float     @default(0.00, map: "DF__purchases__pudSu__1BC821DD")
  pudKey             String    @default(dbgenerated("newid()"), map: "DF__purchases__pudKe__2DE6D218") @db.UniqueIdentifier
  products           products  @relation(fields: [pudProdId], references: [proId], onUpdate: NoAction, map: "FK_purchasesdetails_products")
  purchases          purchases @relation(fields: [pudPurId], references: [purId], onUpdate: NoAction, map: "FK_purchasesdetails_purchases")
}

model sales {
  salId        Int            @id(map: "PK__sales__E3E89296E89D3966") @default(autoincrement())
  salCreatedAt DateTime       @default(now(), map: "DF__sales__salCreate__6A30C649") @db.DateTime
  salUpdatedAt DateTime?      @db.DateTime
  salDeleted   Int            @default(0, map: "DF__sales__salDelete__6C190EBB") @db.TinyInt
  salDate      DateTime       @default(now(), map: "DF__sales__salDate__6D0D32F4") @db.DateTime
  salTotal     Float          @default(0, map: "DF__sales__salTotal__6E01572D")
  salLiteral   String         @db.NVarChar(191)
  salComId     Int
  salCliId     Int
  salClose     Int            @default(0, map: "DF__sales__salClose__6EF57B66") @db.TinyInt
  salUseId     Int?
  salKey       String         @default(dbgenerated("newid()"), map: "DF__sales__salKey__2EDAF651") @db.UniqueIdentifier
  salesdetails salesdetails[]
}

model salesdetails {
  sadId              Int       @id(map: "PK__salesdet__E1DF92118062A7F2") @default(autoincrement())
  sadCreatedAt       DateTime  @default(now(), map: "DF__salesdeta__sadCr__6A30C649") @db.DateTime
  sadUpdatedAt       DateTime? @db.DateTime
  sadDeleted         Int       @default(0, map: "DF__salesdeta__sadDe__6C190EBB") @db.TinyInt
  sadProdId          Int
  sadProdDescription String    @db.NVarChar(191)
  sadProdPrice       Float     @default(0, map: "DF__salesdeta__sadPr__6D0D32F4")
  sadProdCount       Float     @default(0, map: "DF__salesdeta__sadPr__6E01572D")
  sadUseId           Int
  sadSalId           Int
  salLastItem        Int       @default(0, map: "DF__salesdeta__salLa__6FE99F9F") @db.TinyInt
  sadSubTotal        Float     @default(0.00, map: "DF__salesdeta__sadSu__1CBC4616")
  sadKey             String    @default(dbgenerated("newid()"), map: "DF__salesdeta__sadKe__2FCF1A8A") @db.UniqueIdentifier
  products           products  @relation(fields: [sadProdId], references: [proId], onUpdate: NoAction, map: "FK_salesdetails_products")
  sales              sales     @relation(fields: [sadSalId], references: [salId], onUpdate: NoAction, map: "FK_salesdetails_sales")
}

model sysdiagrams {
  name         String @db.NVarChar(128)
  principal_id Int
  diagram_id   Int    @id(map: "PK__sysdiagr__C2B05B61A45B58B8") @default(autoincrement())
  version      Int?
  definition   Bytes?

  @@unique([principal_id, name], map: "UK_principal_name")
}

model users {
  useId        Int       @id(map: "PK__users__2B8F3A10797D7EF1") @default(autoincrement())
  useCreatedAt DateTime  @default(now(), map: "DF__users__useCreate__7D439ABD") @db.DateTime
  useUpdatedAt DateTime? @db.DateTime
  useDeleted   Int       @default(0, map: "DF__users__useDelete__7F2BE32F") @db.TinyInt
  useName      String    @db.NVarChar(191)
  usePassword  String    @db.NVarChar(191)
  useEmail     String    @db.NVarChar(191)
  useComId     Int
  useKey       String    @default(dbgenerated("newid()"), map: "DF__users__useKey__31B762FC") @db.UniqueIdentifier
  companys     companys  @relation(fields: [useComId], references: [comId], onUpdate: NoAction, map: "FK_users_companys")
}

view viewsalesdetails {
  sadId              Int    @unique
  sadKey             String @db.UniqueIdentifier
  sadSubTotal        Float
  salLastItem        Int    @db.TinyInt
  sadSalId           Int
  sadUseId           Int
  sadProdCount       Float
  sadProdPrice       Float
  sadProdDescription String @db.NVarChar(191)
  sadProdId          Int
  proKey             String @db.UniqueIdentifier
  sadDeleted         Int    @db.TinyInt
}
